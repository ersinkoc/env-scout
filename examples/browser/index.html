<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@oxog/env-scout Browser Example</title>
    <style>
        * { box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: #333;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .card h2 {
            margin-top: 0;
            color: #495057;
            font-size: 1.2em;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .label {
            font-weight: 600;
            color: #6c757d;
        }

        .value {
            color: #212529;
            font-family: 'Courier New', monospace;
        }

        .true { color: #28a745; }
        .false { color: #dc3545; }

        /* Dark mode styles */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #f8f9fa;
        }

        body.dark-mode h1 {
            color: #f8f9fa;
            border-bottom-color: #007bff;
        }

        body.dark-mode .card {
            background: #2d2d2d;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        body.dark-mode .card h2 {
            color: #f8f9fa;
        }

        body.dark-mode .info-item {
            border-bottom-color: #3d3d3d;
        }

        body.dark-mode .label {
            color: #adb5bd;
        }

        body.dark-mode .value {
            color: #f8f9fa;
        }

        .actions {
            margin: 20px 0;
        }

        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            transition: background-color 0.3s;
        }

        button:hover {
            background: #0056b3;
        }

        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 0.9em;
        }

        body.dark-mode pre {
            background: #2d2d2d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>@oxog/env-scout Browser Example</h1>
        
        <div class="actions">
            <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
            <button onclick="refreshData()">Refresh Data</button>
            <button onclick="showFullInfo()">Show Full Info</button>
        </div>

        <div class="grid" id="info-grid">
            <!-- Cards will be dynamically inserted here -->
        </div>

        <div id="full-info" style="display: none;">
            <h2>Complete Environment Information</h2>
            <pre id="full-info-content"></pre>
        </div>
    </div>

    <script src="https://unpkg.com/@oxog/env-scout/dist/index.js"></script>
    <script>
        const { 
            isBrowser, getBrowser, getOS, getDeviceType, isDarkMode,
            getEnvironmentInfo, isEnvironment, isOnline, getScreenSize,
            isMobile, isTablet, isDesktop, isTouchDevice, isRetina,
            getOrientation, getSystemLanguage, getTimezone, isHTTPS,
            isPWA, isStandalone, isIframe, getConnectionType,
            isSlowConnection, checkFeatureSupport, isBot,
            prefersReducedMotion, getColorScheme
        } = window.EnvScout;

        // Apply dark mode on load if preferred
        if (isDarkMode()) {
            document.body.classList.add('dark-mode');
        }

        function createInfoCard(title, items) {
            const card = document.createElement('div');
            card.className = 'card';
            
            const titleEl = document.createElement('h2');
            titleEl.textContent = title;
            card.appendChild(titleEl);

            items.forEach(item => {
                const infoItem = document.createElement('div');
                infoItem.className = 'info-item';
                
                const label = document.createElement('span');
                label.className = 'label';
                label.textContent = item.label;
                
                const value = document.createElement('span');
                value.className = 'value';
                
                if (typeof item.value === 'boolean') {
                    value.className += ' ' + item.value;
                    value.textContent = item.value ? '✓ Yes' : '✗ No';
                } else if (typeof item.value === 'object') {
                    value.textContent = JSON.stringify(item.value);
                } else {
                    value.textContent = item.value || 'N/A';
                }
                
                infoItem.appendChild(label);
                infoItem.appendChild(value);
                card.appendChild(infoItem);
            });

            return card;
        }

        function displayInfo() {
            const grid = document.getElementById('info-grid');
            grid.innerHTML = '';

            // Browser Information
            const browserInfo = getBrowser();
            grid.appendChild(createInfoCard('Browser Information', [
                { label: 'Browser', value: browserInfo ? `${browserInfo.name} ${browserInfo.version}` : 'Unknown' },
                { label: 'Is Chrome', value: isEnvironment(['chrome']) },
                { label: 'Is Firefox', value: isEnvironment(['firefox']) },
                { label: 'Is Safari', value: isEnvironment(['safari']) },
                { label: 'Is Bot', value: isBot() }
            ]));

            // Operating System
            grid.appendChild(createInfoCard('Operating System', [
                { label: 'OS', value: getOS() },
                { label: 'Is Windows', value: isEnvironment(['windows']) },
                { label: 'Is macOS', value: isEnvironment(['macos']) },
                { label: 'Is Linux', value: isEnvironment(['linux']) },
                { label: 'Is Mobile OS', value: isEnvironment(['ios']) || isEnvironment(['android']) }
            ]));

            // Device Information
            const screenSize = getScreenSize();
            grid.appendChild(createInfoCard('Device Information', [
                { label: 'Device Type', value: getDeviceType() },
                { label: 'Is Mobile', value: isMobile() },
                { label: 'Is Tablet', value: isTablet() },
                { label: 'Is Desktop', value: isDesktop() },
                { label: 'Touch Device', value: isTouchDevice() },
                { label: 'Retina Display', value: isRetina() },
                { label: 'Screen Size', value: screenSize ? `${screenSize.width}x${screenSize.height}` : 'Unknown' },
                { label: 'Orientation', value: getOrientation() }
            ]));

            // Network & Connection
            grid.appendChild(createInfoCard('Network & Connection', [
                { label: 'Online', value: isOnline() },
                { label: 'Connection Type', value: getConnectionType() || 'Unknown' },
                { label: 'Slow Connection', value: isSlowConnection() },
                { label: 'HTTPS', value: isHTTPS() }
            ]));

            // User Preferences
            grid.appendChild(createInfoCard('User Preferences', [
                { label: 'Color Scheme', value: getColorScheme() },
                { label: 'Dark Mode', value: isDarkMode() },
                { label: 'Reduced Motion', value: prefersReducedMotion() },
                { label: 'Language', value: getSystemLanguage() },
                { label: 'Timezone', value: getTimezone() }
            ]));

            // Features & Capabilities
            const features = checkFeatureSupport([
                'webgl', 'webgl2', 'canvas', 'webassembly',
                'serviceworker', 'notification', 'geolocation'
            ]);
            
            grid.appendChild(createInfoCard('Features & Capabilities', [
                { label: 'WebGL', value: features.webgl },
                { label: 'WebGL2', value: features.webgl2 },
                { label: 'Canvas', value: features.canvas },
                { label: 'WebAssembly', value: features.webassembly },
                { label: 'Service Worker', value: features.serviceworker },
                { label: 'Notifications', value: features.notification },
                { label: 'Geolocation', value: features.geolocation }
            ]));

            // Special Detection
            grid.appendChild(createInfoCard('Special Detection', [
                { label: 'PWA', value: isPWA() },
                { label: 'Standalone', value: isStandalone() },
                { label: 'In iFrame', value: isIframe() },
                { label: 'Development', value: isEnvironment(['development']) },
                { label: 'Production', value: isEnvironment(['production']) }
            ]));
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        function refreshData() {
            displayInfo();
        }

        function showFullInfo() {
            const fullInfoDiv = document.getElementById('full-info');
            const fullInfoContent = document.getElementById('full-info-content');
            
            if (fullInfoDiv.style.display === 'none') {
                fullInfoContent.textContent = JSON.stringify(getEnvironmentInfo(), null, 2);
                fullInfoDiv.style.display = 'block';
            } else {
                fullInfoDiv.style.display = 'none';
            }
        }

        // Initial display
        displayInfo();

        // Update on resize
        window.addEventListener('resize', () => {
            setTimeout(displayInfo, 300);
        });

        // Update on orientation change
        window.addEventListener('orientationchange', displayInfo);
    </script>
</body>
</html>